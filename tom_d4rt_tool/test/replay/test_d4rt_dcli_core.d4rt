# D4rt Test Suite - DCli Core Classes
# Run with: d4rt test_d4rt_dcli_core.d4rt -test
# Tests dcli_core bridged classes


# =============================================================================
# Test: Find (8 tests)
# =============================================================================

# Test Find class exists
var tmpDir = Directory.systemTemp.path;
verifyNotNull(tmpDir, 'System temp dir');

# FindItem
var item = FindItem(tmpDir, FileSystemEntityType.directory);
verifyNotNull(item, 'FindItem created');
verifyEquals(item.pathTo, tmpDir, 'FindItem pathTo');

# =============================================================================
# Test: which function (8 tests)
# =============================================================================

var dartWhich = which('dart');
verifyNotNull(dartWhich, 'which(dart) returns result');
verify(dartWhich.found, 'Dart found in PATH');
verifyNotNull(dartWhich.path, 'which(dart) path');

var nonexistentWhich = which('nonexistent_command_xyz_12345');
verifyEquals(nonexistentWhich.found, false, 'Nonexistent command not found');

# =============================================================================
# Test: Exception Classes
# =============================================================================
# Note: Only testing exceptions bridged in dcli_bridges.b.dart
# Types like DCliPlatformOS, DeleteException, HeadException etc are from
# dcli_core which is not directly exported/bridged.

var createDirEx = CreateDirException('Failed to create dir', '/path/dir');
verifyNotNull(createDirEx, 'CreateDirException created');

var deleteDirEx = DeleteDirException('Failed to delete dir', '/path/dir');
verifyNotNull(deleteDirEx, 'DeleteDirException created');

var moveEx = MoveException('Failed to move', '/src', '/dst', 'Permission denied');
verifyNotNull(moveEx, 'MoveException created');

var moveDirEx = MoveDirException('Failed to move dir', '/src', '/dst');
verifyNotNull(moveDirEx, 'MoveDirException created');

var moveTreeEx = MoveTreeException('/src', '/dst');
verifyNotNull(moveTreeEx, 'MoveTreeException created');

var dcliEx = DCliException('DCli error');
verifyNotNull(dcliEx, 'DCliException created');

var funcEx = DCliFunctionException('Function error');
verifyNotNull(funcEx, 'DCliFunctionException created');

# =============================================================================
# Test: Env Class (6 tests)
# =============================================================================

var env = Env();
verifyNotNull(env, 'Env created');

var home = env.HOME;
verifyNotNull(home, 'HOME from Env');

# Test caseSensitive property
var caseSensitive = env.caseSensitive;
verify(caseSensitive != null, 'caseSensitive property exists');

# =============================================================================
# Summary
# =============================================================================

testSummary();
