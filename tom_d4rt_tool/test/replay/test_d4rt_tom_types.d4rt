# D4rt Test Suite - Part 3: TomCore Types
# Run with: d4rt -run-replay test_d4rt_tom_types.d4rt -test
# Tests TomCore type classes using standard Dart types


# =============================================================================
# Test: Type Checking (5 tests)
# =============================================================================

var intVal = 42;
verify(intVal is int, 'Int type check');

var doubleVal = 3.14;
verify(doubleVal is double, 'Double type check');

var strVal = 'hello';
verify(strVal is String, 'String type check');

var boolVal = true;
verify(boolVal is bool, 'Bool type check');

var listVal = [1, 2, 3];
verify(listVal is List, 'List type check');

# =============================================================================
# Test: Type Conversions (5 tests)
# =============================================================================

var strToInt = int.parse('42');
verifyEquals(strToInt, 42, 'String to int parse');

var strToDouble = double.parse('3.14');
verify(strToDouble > 3.1, 'String to double parse');

var intToStr = 42.toString();
verifyEquals(intToStr, '42', 'Int to string');

var doubleToStr = 3.14.toString();
verifyContains(doubleToStr, '3.14', 'Double to string');

var boolToStr = true.toString();
verifyEquals(boolToStr, 'true', 'Bool to string');

# =============================================================================
# Test: Nullable Types (5 tests)
# =============================================================================

String? nullableStr = null;
verify(nullableStr == null, 'Nullable string is null');

int? nullableInt = null;
verify(nullableInt == null, 'Nullable int is null');

nullableStr = 'not null';
verifyEquals(nullableStr, 'not null', 'Nullable string assigned');

nullableInt = 42;
verifyEquals(nullableInt, 42, 'Nullable int assigned');

var nullCheck = nullableInt != null;
verify(nullCheck, 'Null check works');

# =============================================================================
# Test: Default Values (5 tests)
# =============================================================================

var withDefault = nullableStr ?? 'default';
verifyEquals(withDefault, 'not null', 'Null coalescing with value');

String? nullStr = null;
var defaultStr = nullStr ?? 'default value';
verifyEquals(defaultStr, 'default value', 'Null coalescing with null');

var ternary = nullableInt != null ? nullableInt : 0;
verifyEquals(ternary, 42, 'Ternary with non-null');

int? nullInt = null;
var ternary2 = nullInt ?? 0;
verifyEquals(ternary2, 0, 'Ternary with null');

var combined = (nullableStr ?? '') + ' test';
verifyContains(combined, 'not null', 'Combined null coalesce');

# =============================================================================
# Summary
# =============================================================================

testSummary();
